import {Nucleus, Quote, Theme} from "../build/types/phrase_typedef";

export default {
    install: (app, options) => {
        console.log("Hello from plugin " + options.option)

        // Quote.vue template is responsible for loading content based on the id
        // define themes and nuclei
        // put these in an array or dict when loading all the json?
        let n_Inclusion = new Nucleus("inclusion")
        let n_Exclusion = new Nucleus("exclusion")
        let t_Belonging = new Theme("belonging", [n_Exclusion, n_Inclusion])

        // themes["belonging].nuclei to see what to display
        let themes = {
            "belonging": t_Belonging
        }

        let quotes = {}

        // load json and generate Quote objects, put them in
        //  a dictionary keyed by id. Then append ids to the correct
        //  nuclei lists


        // dummy quotes with just speaker, fulltext, id
        for (let i = 0; i < 30; i++) {
            let speaker = i % 2 === 0 ? "immigrant" : "firstgen"
            let nuc_names = []
            if (i % 3 === 0) {
                nuc_names.push("inclusion")
                speaker === "immigrant" ?
                    n_Inclusion.quoteIds.unshift(i) : n_Inclusion.quoteIds.push(i)
            } else if (i % 3 === 1) {
                nuc_names.push("exclusion")
                speaker === "immigrant" ?
                    n_Exclusion.quoteIds.unshift(i) : n_Exclusion.quoteIds.push(i)
            } else if (i % 3 === 2) {
                nuc_names.push("inclusion")
                nuc_names.push("exclusion")
                speaker === "immigrant" ?
                    n_Inclusion.quoteIds.unshift(i) : n_Inclusion.quoteIds.push(i)

                speaker === "immigrant" ?
                    n_Exclusion.quoteIds.unshift(i) : n_Exclusion.quoteIds.push(i)
            }
            let fullText = "This is quote with id = " + i + " speaker = " + speaker + " nuclei = " + JSON.stringify(nuc_names)
            quotes[i] = new Quote(i, speaker, fullText)
        }
        console.log("----- main.js: LOADED QUOTE DATA -----")
        console.log("All quotes: ", quotes)
        console.log("n_Inclusion: ", n_Inclusion)
        console.log("n_Exclusion: ", n_Exclusion)
        console.log("All themes: ", themes)


        app.provide('plugin', "plugin")
        app.mixin({
            created() {
                console.log("hello from new mixin")
            }
        })
    },

}